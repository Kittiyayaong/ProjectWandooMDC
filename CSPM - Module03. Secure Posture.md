# Module 3 - Secure Posture

## âœ… Secure Postureë€?

**ë³´ì•ˆ íƒœì„¸ (Security Posture)**  
- í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ì˜ ë³´ì•ˆ ìƒíƒœë¥¼ í‰ê°€  
- **ë³´ì•ˆ ì ìˆ˜(Secure Score)** ë¡œ í˜„ì¬ ìƒíƒœë¥¼ ì‹œê°í™”  
- Microsoft Cloud Security Benchmark(MCSB) ë“± í‘œì¤€ ê¸°ë°˜ í‰ê°€  
- ì¡°ì§ì€ ì´ë¥¼ í†µí•´ **Remediation(ì‹œì • ì¡°ì¹˜) ìš°ì„ ìˆœìœ„**ë¥¼ ê²°ì •

## âœ… Lab í•µì‹¬ìš”ì†Œ 
| **í•­ëª©**       | **ë‚´ìš©**                                                                                                                                  |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------- |
| **ë© ëª©ì **     | **ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì˜ ì·¨ì•½ì  í‰ê°€**                                                                                                                    |
| **ë¬´ì—‡ì„ ë°°ìš°ë‚˜?** | Microsoft Defender for Cloudê°€ \*\*Azure Container Registry (ACR)\*\*ì— ì €ì¥ëœ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ìŠ¤ìº”í•˜ì—¬ **ì·¨ì•½ì ì„ íƒì§€**í•˜ê³ , ë³´ì•ˆ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•             |
| **í•µì‹¬ ì ˆì°¨**    | 1. ACR (Container Registry) ìƒì„±<br>2. í…ŒìŠ¤íŠ¸ìš© Linux ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€(`hello-world`) ë¹Œë“œ ë° ACRì— í‘¸ì‹œ<br>3. Defender for Cloudê°€ ìë™ ìŠ¤ìº”í•˜ì—¬ **ì·¨ì•½ì  ê²°ê³¼ í‘œì‹œ** í™•ì¸ |
| **ê¸°ìˆ  í¬ì¸íŠ¸**   | - **Qualys ì—”ì§„**ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ ì·¨ì•½ì  ë¶„ì„<br>- Defender for Cloudê°€ ì´ë¯¸ì§€ í‘¸ì‹œ í›„ ìë™ ìŠ¤ìº”<br>- ì‹¤ìŠµ ì™„ë£Œ í›„ \*\*Recommendation(ê¶Œì¥ ì‚¬í•­)\*\*ì— ì·¨ì•½ì  ê²°ê³¼ í‘œì‹œ          |
| **ì‹¤ë¬´ ì ìš© ê°€ì¹˜** | - DevOps íŒŒì´í”„ë¼ì¸ì— ACR ì·¨ì•½ì  í‰ê°€ë¥¼ í†µí•© ê°€ëŠ¥<br>- ì´ë¯¸ì§€ ë°°í¬ ì „ **ë³´ì•ˆ ê²€ì¦**ìœ¼ë¡œ ê³µê¸‰ë§ ë¦¬ìŠ¤í¬ ìµœì†Œí™”<br>- ê´€ë¦¬ìëŠ” Defender for Cloud Dashboardì—ì„œ ì „ì²´ ì·¨ì•½ì  í˜„í™©ì„ ì‹œê°í™” ê°€ëŠ¥      |
| **ê²°ë¡  ë¬¸ì¥**    | **â€œACRì— í‘¸ì‹œëœ ì´ë¯¸ì§€ê°€ Defender for Cloudë¥¼ í†µí•´ ìë™ ìŠ¤ìº”ë˜ê³ , ì·¨ì•½ì  ê²°ê³¼ê°€ ê´€ë¦¬ ì½˜ì†”ì— í‘œì‹œë˜ì–´ ë³´ì•ˆ íƒœì„¸ë¥¼ ê°•í™”í•  ìˆ˜ ìˆìŒì„ ì´í•´í•˜ëŠ” ì‹¤ìŠµâ€**                                        |


---

### Lab 1: ì»¨í…Œì´ë„ˆì˜ ì·¨ì•½ì„± í‰ê°€

Microsoft Defender for CloudëŠ” ACRì— í‘¸ì‹œë˜ê±°ë‚˜ ê°€ì ¸ì˜¨ ì´ë¯¸ì§€, ë˜ëŠ” ì§€ë‚œ 30ì¼ ì´ë‚´ì— ê°€ì ¸ì˜¨ ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ìŠ¤ìº”í•©ë‹ˆë‹¤. ì´ ìŠ¤ìº” ê³¼ì •ì—ì„œ ê° ì´ë¯¸ì§€ì— ëŒ€í•œ ë³´ì•ˆ ì·¨ì•½ì ì„ íƒì§€í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ì´ë¯¸ì§€ë³„ë¡œ ìì„¸íˆ í‘œì‹œí•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ë°œê²¬ëœ ëª¨ë“  ì·¨ì•½ì ì€ "Azure ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì´ë¯¸ì§€ì˜ ì·¨ì•½ì ì€ Qualysì—ì„œ í•´ê²°í•´ì•¼ í•©ë‹ˆë‹¤"ë¼ëŠ” ê¶Œì¥ ì‚¬í•­ì— ë”°ë¼ ì²˜ë¦¬ë©ë‹ˆë‹¤. QualysëŠ” ì•ì„œ ì„¤ëª…í•œ ê²ƒì²˜ëŸ¼ í´ë¼ìš°ë“œ ê¸°ë°˜ ë³´ì•ˆ ì†”ë£¨ì…˜ì„ ì œê³µí•˜ëŠ” íšŒì‚¬ë¡œ, ì·¨ì•½ì  ê´€ë¦¬ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.


#### Lab 1-1. Azureì—ì„œ Container Registry ìƒì„±í•˜ê¸°

1. Portal.azure.comìœ¼ë¡œ ë¡œê·¸ì¸ í›„ ìƒë‹¨ì— **Create Resoure (ë¦¬ì†ŒìŠ¤ë§Œë“¤ê¸°)** í´ë¦­
2. ê²€ìƒ‰ ì°½ì— "Container Registry"ë¥¼ ì…ë ¥í•˜ê³ , ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
  ![image](https://github.com/user-attachments/assets/81d5c086-eb68-46cf-9768-5c429dfc41af)

3. Create í´ë¦­
4. Create container registryì—ì„œ detailí•œ ì •ë³´ ê¸°ì… í›„ Review + Create
> âœ… **ì‹¤ìŠµ Lab ê¸°ì¤€**
  > - Subscription: ë³¸ì¸ Subscription
  > - Resource group: ìƒˆë¡œ ìƒì„± (ex. wandoo-mdc)  
  > - Registry name: ê³ ìœ í•œ ì´ë¦„ (ex. wandootestcontainer1 (user number))
  > - Location: Korea Central
  > - Domain name label scope: Unsecure
  > - Pricing plan: Standard
  > - Role assignment permissions mode: RBAC Registry Permissions

#### Lab 1-2. ì·¨ì•½ì ì´ ìˆëŠ” ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì´ë¯¸ì§€ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ê¸° ìœ„í•´ ACR ì‘ì—… ëª…ë ¹ì–´ì™€ ìƒ˜í”Œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. (Azure trialì˜ ê²½ìš° ì´ë¯¸ì§€ ì—…ë¡œë“œ ë¶ˆê°€) 

1. Portal.azure.com ì—ì„œ Container registriesë¥¼ ê²€ìƒ‰í•˜ì—¬ ë“¤ì–´ê°‘ë‹ˆë‹¤. 
2. Lab 1-1ì—ì„œ ìƒì„±í•œ Containerê°€ ë¦¬ìŠ¤íŠ¸ì— ìˆìŒì„ í™•ì¸í•œ í›„, ì´ë¦„ì´ë‚˜ ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.
3. bash í™˜ê²½ì„ ì‚¬ìš©í•˜ì—¬ [Azure Cloud Shell](https://shell.azure.com/)ì„ ì—½ë‹ˆë‹¤. 
![image](https://github.com/user-attachments/assets/7cfef76a-f1f1-4d7e-b64e-2078b3ce3903)
4. Microsoft ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ í˜¸ìŠ¤íŒ…í•˜ëŠ” hello-world ì´ë¯¸ì§€ì—ì„œ Linux ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  ì´ë¥¼ êµ¬ë…ì˜ ê¸°ì¡´ Azure ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¸ìŠ¤í„´ìŠ¤ë¡œ í‘¸ì‹œí•©ë‹ˆë‹¤:

ë‹¤ìŒ ë‘ ìŠ¤í¬ë¦½íŠ¸ ë¸”ë¡ ì‹¤í–‰í•©ë‹ˆë‹¤. :

```
echo FROM mcr.microsoft.com/azuredocs/aci-helloworld > Dockerfile
```

ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì´ë¦„ì„ í¬í•¨í•˜ë„ë¡ ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤. :

```
az acr build --image sample/hello-world:v1 --registry <your container registry name> --file Dockerfile .
```

![image](https://github.com/user-attachments/assets/846beec8-1625-4a55-8e8c-5cf0092ff886)

5. ì„±ê³µ ë©”ì‹œì§€ê°€ ë‚˜íƒ€ë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
   
![image](https://github.com/user-attachments/assets/77cdb543-527a-42e4-89fe-80c86f2f03ce)

7. Recommendatinoì—ì„œ í•­ëª©ì´ ë‚˜íƒ€ë‚˜ê¸° ìœ„í•´, ìŠ¤ìº”ì€ ì¼ë°˜ì ìœ¼ë¡œ ëª‡ ë¶„ ì´ë‚´ì— ì™„ë£Œë˜ì§€ë§Œ, ì·¨ì•½ì /ë³´ì•ˆ ê²°ê³¼ê°€ ê¶Œì¥ ì‚¬í•­ì— ë‚˜íƒ€ë‚˜ë ¤ë©´ ìµœëŒ€ 15ë¶„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/69540ca7-700f-4106-a28c-e0122dee9310)


### ğŸ”— [ë‹¤ìŒ Labìœ¼ë¡œ ì´ë™í•˜ê¸° Â»](https://github.com/Kittiyayaong/ProjectWandooMDC/blob/main/CSPM%20-%20Module04.%20Microsoft%20Defender%20Plans.md)








