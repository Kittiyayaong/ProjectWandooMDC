# Module 5 - Agentless container vulnerability assessment scanning

## 목표
이 Module은 Microsoft Defender 취약성 관리를 기반으로 하는 에이전트 없는 컨테이너 이미지 취약성 평가 스캔을 Azure 컨테이너 레지스트리에 대해 검증하고 사용하는 방법을 안내합니다.

### 전제 조건
이 기능을 사용하려면 구독에서 Defender for Containers 또는 Defender Cloud 보안 자세 관리 기능을 활성화해야 합니다. 

MDC console > Management > Envorionment settings > 하단에 테스트 대상 Subscription 이동 > Defender Plans > 상단에 Settings & monitoring > Agentless scanning for machines가 **on**으로 설정되어있는지 확인 
![image](https://github.com/user-attachments/assets/5bca1492-0dbf-4b7f-b708-6fd6c7575d68)

### Lab 1: Install Docker Desktop
먼저, 기존 Azure 컨테이너 레지스트리에 취약한 이미지를 표시할 수 있도록 Docker Desktop을 설치해야 합니다.

1.	[Docker](https://www.docker.com/products/docker-desktop)로 이동하여 다운로드 후 install합니다. 
2.  Install 후, Powershell에서 Docker versoin을 확인합니다.
```
    docker version​
```
![image](https://github.com/user-attachments/assets/b5c03694-b619-4b8d-9296-715dbbacd972)


### Lab 2: Docker Hub에서 컨테이너 레지스트리로 취약 이미지 다운로드

이제 Docker를 사용하여 취약한 이미지를 다운로드하고, 이를 Lab 1의 ARM 템플릿을 사용하여 생성한 컨테이너 레지스트리로 푸시할 것입니다.

1. Azure 포털 > Container registries > 생성한 container 클릭 > Login Server 이름을 복사합니다. 
2. PowerShell을 열고 (여기서 NameOfServer는 위에서 복사한 것입니다) 아래 명령을 실행합니다: <br />
```
az acr login --name NameOfServer
```
아직 Azure CLI를 설치하지 않은 경우 https://docs.microsoft.com/en-us/cli/azure/install-azure-cli 를 방문하여 지침을 확인하세요. 또한 위의 명령을 실행하기 전에 *az 로그인*을 통해 Azure 구독에 로그인해야 합니다.
