# Module 02 - Regulatory Compliance

## Wandoo-KTëŠ” ì´ë²ˆ ë©ì—ì„œëŠ” Lab 3~5ë§Œ ì§„í–‰í•©ë‹ˆë‹¤.

## ëª©í‘œ
Microsoft Defender for Cloudì˜ ê·œì • ì¤€ìˆ˜ ëŒ€ì‹œë³´ë“œë¥¼ í†µí•´ íŠ¹ì • í‘œì¤€ì— ëŒ€í•œ ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœë¥¼ í‰ê°€í•˜ì—¬ ê³ ê°ì´ ì´ëŸ¬í•œ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤

### Regulatory Complianceë€? <br>
ê·œì • ì¤€ìˆ˜ ê¸°ëŠ¥ì€ í´ë¼ìš°ë“œ í™˜ê²½ì´ ë‹¤ì–‘í•œ ê·œì • ì¤€ìˆ˜ í‘œì¤€ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í‰ê°€í•˜ê³  ëª¨ë‹ˆí„°ë§í•˜ëŠ” ë° ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ í´ë¼ìš°ë“œ í™˜ê²½ì˜ ë³´ì•ˆ ìƒíƒœë¥¼ í‰ê°€í•˜ê³ , ë‹¤ì–‘í•œ ê·œì • ì¤€ìˆ˜ í‘œì¤€ì— ëŒ€í•œ ì¤€ìˆ˜ ì—¬ë¶€ë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.

* ê¸°ëŠ¥:
  * ë³´ì•ˆ í‘œì¤€ í• ë‹¹ ë° í‰ê°€.
  * ê·œì • ì¤€ìˆ˜ ìƒíƒœ ëª¨ë‹ˆí„°ë§.
  * ê·œì • ì¤€ìˆ˜ ëŒ€ì‹œë³´ë“œ ì œê³µ.

### Lab ìš”ì•½

| **Lab ë²ˆí˜¸** | **ì œëª©**               | **ëª©í‘œ**                                         | **ì£¼ìš” ë‚´ìš©**                                                                                                                                 | **ì‹¤ë¬´ ê°€ì¹˜**                                 |
| ---------- | -------------------- | ---------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------- |
| **Lab 1**  | Adding new standards | Subscriptionì— **ìƒˆ ê·œì • ì¤€ìˆ˜ í‘œì¤€(CIS Benchmark)** ì¶”ê°€ | - Cloud Security â” Regulatory Compliance â” Manage compliance policies<br>- CIS Benchmark v2.0.0 í• ë‹¹<br>- Parameter ì„¤ì •(ì˜ˆ: Key rotation 30ì¼) | í´ë¼ìš°ë“œ ìì‚°ì„ **ê¸€ë¡œë²Œ ë³´ì•ˆ í‘œì¤€ì— ë§¤í•‘**                |
| **Lab 2**  | ë²¤ì¹˜ë§ˆí¬ ë³´ê³ ì„œ ë‹¤ìš´ë¡œë“œ        | ê·œì • ì¤€ìˆ˜ ìƒíƒœë¥¼ **CSV/PDF ë³´ê³ ì„œ**ë¡œ ë‚´ë³´ë‚´ê¸°                | - CIS Benchmark í˜ì´ì§€ â” Download CSV ì„ íƒ<br>- í‰ê°€ëœ ìƒíƒœ ìš”ì•½ í™•ì¸                                                                                   | **ê°ì‚¬ ëŒ€ì‘**, ê²½ì˜ì§„/ë³´ì•ˆíŒ€ ë³´ê³                      |
| **Lab 3**  | Custom Standard ìƒì„±   | ì¡°ì§ ìì²´ **ì»¤ìŠ¤í…€ ê·œì • ì¤€ìˆ˜ í‘œì¤€ ìƒì„±**                      | - +Create â” Custom Standard ìƒì„±<br>- EDR Recommendations ì¶”ê°€ â” Review + Create                                                              | **ê³ ê°ì‚¬ ë§ì¶¤ ê·œì • ì¤€ìˆ˜ í”„ë ˆì„ì›Œí¬** êµ¬ì¶•                 |
| **Lab 4**  | ê°ì‚¬ ë³´ê³ ì„œ ë‹¤ìš´ë¡œë“œ          | Microsoft ê°ì‚¬ ë³´ê³ ì„œ **(Audit Report)** ë‹¤ìš´ë¡œë“œ       | - Regulatory Compliance â” Audit Report í´ë¦­<br>- ì˜ˆ: IRS Safeguards Notification Form                                                        | **ê°ì‚¬ ì¦ë¹™ ë¬¸ì„œ í™•ë³´**                           |
| **Lab 5**  | ì‹œê°„ì— ë”°ë¥¸ ê·œì • ì¤€ìˆ˜ í†µí•© ë¬¸ì„œ   | ê·œì • ì¤€ìˆ˜ ìƒíƒœë¥¼ **ì‹œê°„ ê²½ê³¼ë³„ë¡œ ì¶”ì **                       | - Continuous Export â” Log Analyticsë¡œ ë‚´ë³´ë‚´ê¸° ì„¤ì •<br>- Regulatory compliance ë°ì´í„° ì„ íƒ â” Streaming + Snapshots í™œì„±í™”                                | ê·œì • ì¤€ìˆ˜ **ì¶”ì„¸ ë¶„ì„, Power BI, Sentinel ì—°ê³„** ê°€ëŠ¥ |


---

### Lab 1: Adding new standards in Azure and multicloud

1.	MDC Consoleì—ì„œ Cloud Security >  Regulatory Compliance > ìƒë‹¨ì— Manage compliance policies > í…ŒìŠ¤íŠ¸ ëŒ€ìƒì¸ Subscription > Security policiesë¡œ ì´ë™í•©ë‹ˆë‹¤.

> â­ Tips: <br>
AWS ë˜ëŠ” GCPì—ì„œ í‘œì¤€ì„ í• ë‹¹í•˜ë ¤ë©´ AWS ë˜ëŠ” GCP ì—°ê²°ì„ ì„ íƒí•œ ë‹¤ìŒ **Security Policy**ë¡œ ì§ì ‘ ì´ë™í•©ë‹ˆë‹¤. ì„¸ í´ë¼ìš°ë“œ ëª¨ë‘ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ê·œì • ì¤€ìˆ˜ í‘œì¤€ì€ [ì—¬ê¸°](https://learn.microsoft.com/en-us/azure/defender-for-cloud/concept-regulatory-compliance-standards#available-compliance-standards) ì— ë¬¸ì„œí™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

3. *CIS Microsoft Azure Foundations Benchmark v2.0.0*ë¥¼ ì°¾ì•„ í´ë¦­í•©ë‹ˆë‹¤. 

> â­ Tips: <br>
> * **Audit effect**: ë¦¬ì†ŒìŠ¤ê°€ íŠ¹ì • ì •ì±… ì •ì˜ë¥¼ ì¤€ìˆ˜í•˜ì§€ ì•Šì„ ê²½ìš°, ì •ì±…ì€ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ë¹„ì¤€ìˆ˜(non-compliant)ë¡œ í‘œì‹œí•˜ê³  í™œë™ ë¡œê·¸ì— ê²½ê³ ë¥¼ ìƒì„±í•˜ì§€ë§Œ ì‹¤ì œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ì„œëŠ” ì¡°ì¹˜ë¥¼ ì·¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°ì‚¬ íš¨ê³¼ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ì´ [í˜ì´ì§€](https://learn.microsoft.com/en-us/azure/governance/policy/concepts/effect-audit)ë¥¼ ë°©ë¬¸í•˜ì„¸ìš”.
> * **Manual effect**: ì¼ë¶€ ì‘ì—…ì´ë‚˜ ì‘ì—…ì„ ìë™í™”í•  ìˆ˜ ì—†ê±°ë‚˜ ë¦¬ì†ŒìŠ¤ì˜ ê·œì • ì¤€ìˆ˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•˜ëŠ” ê²½ìš° ìˆ˜ë™ ì¸ì¦ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ë ¤ë©´ ì´ [í˜ì´ì§€](https://learn.microsoft.com/en-us/azure/governance/policy/concepts/effect-manual) ë¥¼ í™•ì¸í•˜ì„¸ìš”.

4. **rotation** ì„ ê²€ìƒ‰í•˜ì—¬ **Keys should have a rotation policy ensuring that their rotation is scheduled within the specified number of days after creation.** ë¥¼ í™•ì¸í•´ë³´ë©´, **Additional parameters** í•­ëª©ê°’ì´ **Configured**ë¡œ ì„¤ì •ë˜ì–´ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
5. ìš°ì¸¡ì˜ ì  3ê°œë¥¼ í´ë¦­í•´ì„œ **view policy definition**ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
<img src="https://github.com/user-attachments/assets/027ea85e-5303-4966-aec6-2a5b03d53b0e" alt="image" width="700" height="150">
   
6. Assign policyë¥¼ í´ë¦­í•˜ì—¬, Scopeì™€ definitionì„ ì„¤ì •í•©ë‹ˆë‹¤. 
<img src="https://github.com/user-attachments/assets/eaa2038d-395d-4ccd-a6bf-c537f4824c4d" alt="image" width="700" height="300">

7. Standardë¥¼ Scope(êµ¬ë… ë˜ëŠ” ê´€ë¦¬ ê·¸ë£¹)ì— í• ë‹¹í•  ë•Œ, ì´ ì •ì±… ì •ì˜ì— ë”°ë¼ í‚¤ë¥¼ íšŒì „í•  ìµœëŒ€ ì¼ìˆ˜ë¥¼ ì…ë ¥í•˜ë¼ëŠ” Parameterì„¤ì •ì— 30ìœ¼ë¡œ ê¸°ì…í•©ë‹ˆë‹¤. ê¸°ì… í›„ review + Createë¥¼ í´ë¦­í•˜ì—¬ ì„¤ì •ì„ ì™„ë£Œí•©ë‹ˆë‹¤.
<img src="https://github.com/user-attachments/assets/d26c0d15-35cc-4763-859e-9dfb6bfb38c5" alt="image" width="400" height="150">
9.  ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ì„œ **CIS Microsoft Azure Foundations Benchmark v2.0.0** ì˜ í† ê¸€ **On**ìœ¼ë¡œ í´ë¦­í•©ë‹ˆë‹¤.
10. ëª‡ ì‹œê°„ í›„, ì´ ìƒˆë¡œìš´ í‘œì¤€ì€ ê¸°ë³¸ MCSB ì˜†ì— ìˆëŠ” **Regulatory Compliance** ëŒ€ì‹œë³´ë“œì— í‘œì‹œë©ë‹ˆë‹¤.

> â— Important: <br>
> ë³€ê²½ ì‚¬í•­ì´ ì ìš©ë  ë•Œê¹Œì§€ 2-3ì‹œê°„ ì†Œìš”ë©ë‹ˆë‹¤. 

---

### Lab 2: ë²¤ì¹˜ë§ˆí¬ ë³´ê³ ì„œ 
1. Lab 1ì˜ Standard í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬, *CIS Microsoft Azure Foundations Benchmark v2.0.0*ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. 
2. ê·œì œ í‘œì¤€ ì¤€ìˆ˜ ìƒíƒœë¥¼ PDF ë³´ê³ ì„œ ë˜ëŠ” CSV íŒŒì¼ë¡œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒë‹¨ ë©”ë‰´ ëª¨ìŒì—ì„œ **Downloaded CSV file**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
3. íŒŒì¼ì´ë¦„ ë° íŒŒì¼í˜•ì‹ì„ ì§€ì •í•˜ì—¬ ì»´í“¨í„°ì— ì €ì¥ë©ë‹ˆë‹¤. **CIS Microsoft Azure Foundations Benchmark v2.0.0**ì„ ì—´ê³  ê·œì • ì¤€ìˆ˜ ë³´ê³ ì„œë¥¼ ì‚´í´ë³´ì„¸ìš” - ì´ ë³´ê³ ì„œëŠ” í•´ë‹¹ í‰ê°€ê°€ ê´€ë ¨ëœ ì œì–´ ì¥ì¹˜ì— ë§¤í•‘ë  ë•Œì˜ ìƒíƒœë¥¼ ìš”ì•½í•©ë‹ˆë‹¤.

--- 

### Lab 3: Custom Standard ìƒì„±í•˜ê¸° 
ë³„ë„ì˜ "ë²¤ì¹˜ë§ˆí¬"ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, "Standard"ì´ë¼ëŠ” ìš©ì–´ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. StandardëŠ” í•˜ë‚˜ ì´ìƒì˜ ê¶Œì¥ ì‚¬í•­ìœ¼ë¡œ êµ¬ì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì‚¬ìš©ì ì§€ì • í‘œì¤€ì„ ë§Œë“¤ë©´ Defender for Cloudë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ë‘ ê°€ì§€ ì£¼ìš” ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤:
* ë³´ì•ˆ ìš”êµ¬ ì‚¬í•­ì´ ìˆëŠ” ê²½ìš° ì¶”ì²œ ëª©ë¡ì— ë§ì¶¤í˜• ì¶”ì²œìœ¼ë¡œ í‘œì‹œ
* ê·œì • ì¤€ìˆ˜ ëŒ€ì‹œë³´ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê·œì • ì¤€ìˆ˜ ìƒíƒœë¥¼ ì¶”ì í•˜ëŠ” ë°©ë²•ì„ ì œì‹œ

1.	MDC Consoleì—ì„œ Cloud Security >  Regulatory Compliance > ìƒë‹¨ì— Manage compliance policies > í…ŒìŠ¤íŠ¸ ëŒ€ìƒì¸ Subscription > Security policiesë¡œ ì´ë™í•©ë‹ˆë‹¤.
2.	ìƒë‹¨ì— + Createë¥¼ í´ë¦­í•˜ì—¬ **Custom Standard**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. 
<img src="https://github.com/user-attachments/assets/c08a09e7-5f87-4742-9b6a-6c33a519a8e3" alt="image" width="400" height="200">

3. EDR ê´€ë ¨ëœ Recommendationsë¥¼ ì¶”ê°€ í›„ Review + Createë¥¼ í•©ë‹ˆë‹¤. 
<img src="https://github.com/user-attachments/assets/899b8d12-dc00-4dbe-a45c-e59078d1a3ad3" alt="image" width="700" height="150">

4. ìƒˆë¡œ ìƒì„±ëœ í‘œì¤€ì´ êµ¬ë…ì— ì ìš©ë˜ëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ Regulatory Compliance ëŒ€ì‰¬ë³´ë“œì—ì„œ **Status**ë¡œ ì •ë ¬í•˜ì„¸ìš”.
![module4_customstandard](https://github.com/Azure/Microsoft-Defender-for-Cloud/assets/45104504/aba2680c-9d1e-4fae-bb98-63ea3627c9a4)

---

### Lab 4: Azure ê°ì‚¬ ë³´ê³ ì„œ 
Microsoft Defender for Cloudì—ì„œëŠ” ê·œì • ì¤€ìˆ˜ í‘œì¤€ì— ëŒ€í•œ ê°ì‚¬ ë³´ê³ ì„œë¥¼ ì‰½ê²Œ ì‘ì„±í•˜ê³  ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1.	MDC Consoleì—ì„œ Cloud Security >  Regulatory Compliance > ìƒë‹¨ì— Audit Report í´ë¦­
![image](https://github.com/user-attachments/assets/ead116ef-aed5-436d-b3ab-01065e61901f)

3.	í•„ìš”í•œ ë‚´ìš©ì„ ë‹¤ìš´ë¡œë“œë°›ìŠµë‹ˆë‹¤. ex) Azure 2021 IRS Safeguards Cloud Computing Notification Form

---

### Lab 5: ì‹œê°„ì— ë”°ë¥¸ ê·œì • ì¤€ìˆ˜ í†µí•© ë¬¸ì„œ

ì‹œê°„ ê²½ê³¼ì— ë”°ë¥¸ ì¤€ìˆ˜ í†µí•© ë¬¸ì„œëŠ” ëŒ€ì‹œë³´ë“œì— ì¶”ê°€í•˜ëŠ” ë‹¤ì–‘í•œ í‘œì¤€ì„ ì‚¬ìš©í•˜ì—¬ ì‹œê°„ ê²½ê³¼ì— ë”°ë¥¸ ì¤€ìˆ˜ ìƒíƒœë¥¼ ì¶”ì í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ì—¬ê¸°](https://learn.microsoft.com/en-us/azure/defender-for-cloud/custom-dashboards-azure-workbooks#compliance-over-time-workbook). ì´ ì›Œí¬ë¶ì„ í™œìš©í•˜ë ¤ë©´ ë¨¼ì € ì—°ì† ë‚´ë³´ë‚´ê¸°ë¥¼ êµ¬ì„±í•˜ì—¬ Log Analytics ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¡œ ë°ì´í„°ë¥¼ ë‚´ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤.

1.	MDC Consoleì—ì„œ Management > Environment Settings > í•˜ë‹¨ì— í…ŒìŠ¤íŠ¸ì— ì‚¬ìš©í•  subscriptioní´ë¦­
![image](https://github.com/user-attachments/assets/e5b9d439-a603-4a69-afb6-dc1b0c2502fc)

2. ì™¼ìª½ì—ì„œ **Continuous Export** í´ë¦­ í›„ **Log Analytics workspace**ìœ¼ë¡œ ì´ë™ 
![image](https://github.com/user-attachments/assets/e858eec8-1d7a-4050-afca-8bcc159a4bd2)

3. Export enabled í† ê¸€ì„ **On**ìœ¼ë¡œ ì„¤ì • í›„, í•˜ë‹¨ì˜ Exported data typeì—ì„œ **Regulatory compliance** í´ë¦­ í›„ **Select All**
![image](https://github.com/user-attachments/assets/7281e452-20fc-42d0-b39f-55c54dc54a3b)

4. Export FrequencyëŠ” **Streaming updates**ì™€ **Snapshots** ëª¨ë‘ ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ì—¬ í™œì„±í™”í•©ë‹ˆë‹¤.
5. Export Configurationì—ì„œ ì´ì „ì— ìƒì„±í•œ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì„ ì„ íƒí•©ë‹ˆë‹¤.
6. ì €ì¥ ì‹œ Sentinel ì•Œë¦¼ ì»¤ë„¥í„°ê°€ í™œì„±í™”ê°€ í•„ìš”í•˜ë¯€ë¡œ, ì´ë²ˆ Labì—ì„œëŠ” ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  

### ğŸ”— [ë‹¤ìŒ Labìœ¼ë¡œ ì´ë™í•˜ê¸° Â»](https://github.com/Kittiyayaong/ProjectWandooMDC/blob/main/CSPM%20-%20Module03.%20Secure%20Posture.md)
